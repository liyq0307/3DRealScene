-- ====================================================================
-- 更新场景对象位置脚本
-- ====================================================================
-- 此脚本将场景对象的位置从无效的 [0,0,0] 更新为有效的地理坐标
-- 默认使用北京天安门广场坐标：经度 116.397128, 纬度 39.908802, 高度 100米
-- ====================================================================

-- 1. 查看当前所有场景对象的位置
SELECT
    id,
    name,
    "SceneId",
    ST_AsText("Position") AS current_position
FROM "SceneObjects"
ORDER BY "CreatedAt" DESC;

-- 2. 更新所有位置为 [0,0,0] 的场景对象到北京天安门广场
-- 使用 ST_MakePoint(经度, 纬度, 高度) 创建3D点
-- SRID 4326 表示 WGS84 坐标系统
UPDATE "SceneObjects"
SET "Position" = ST_SetSRID(ST_MakePoint(116.397128, 39.908802, 100), 4326),
    "UpdatedAt" = NOW()
WHERE ST_X("Position") = 0
  AND ST_Y("Position") = 0
  AND ST_Z("Position") = 0;

-- 3. 验证更新结果
SELECT
    id,
    name,
    ST_AsText("Position") AS new_position,
    ST_X("Position") AS longitude,
    ST_Y("Position") AS latitude,
    ST_Z("Position") AS height
FROM "SceneObjects"
ORDER BY "CreatedAt" DESC;

-- ====================================================================
-- 如果想为特定对象设置不同的位置，使用以下模板：
-- ====================================================================

-- 示例：更新特定对象到自定义位置
-- UPDATE "SceneObjects"
-- SET "Position" = ST_SetSRID(ST_MakePoint(经度, 纬度, 高度), 4326),
--     "UpdatedAt" = NOW()
-- WHERE name = '对象名称';

-- ====================================================================
-- 常用城市坐标参考：
-- ====================================================================
-- 北京天安门广场: (116.397128, 39.908802, 100)
-- 上海东方明珠: (121.499740, 31.239523, 100)
-- 广州小蛮腰: (113.324520, 23.108890, 100)
-- 深圳平安大厦: (114.110000, 22.547000, 100)
-- 成都春熙路: (104.081534, 30.660260, 100)
-- 杭州西湖: (120.149593, 30.243124, 100)
-- ====================================================================
